<section>
	<ul cdkDropList (cdkDropListDropped)="onDrop($event)">
		<ng-container *ngFor="let todo of todos">
			<li #dragItem cdkDrag>
				<div class="todo-container">
					<div class="checkbox">
						<vscode-checkbox
							(click)="toggleCompleted(todo.id)"
							[checked]="todo.completed"
						></vscode-checkbox>
					</div>
					<div class="content">
						<div class="body" (click)="toggleFooter(todo.id)">
							<text-area
								*ngIf="componentState[todo.id]?.isEditable"
								id="text-area-{{ todo.id }}"
								class="todo-text"
								[(value)]="todo.text"
							>
							</text-area>
							<p
								*ngIf="!componentState[todo.id]?.isEditable"
								class="todo-text"
								[class.complete]="todo.completed"
							>
								{{ todo.text }}
							</p>
						</div>
						<div class="footer" *ngIf="componentState[todo.id]?.footerActive">
							<div>// Starred</div>
							<div class="buttons">
								<vscode-button
									(click)="componentState[todo.id]?.isEditable ? saveEdit(todo.id) : toggleEdit(todo.id)"
									[innerText]="componentState[todo.id]?.isEditable ? 'Ok' : 'Edit'"
								></vscode-button>
								<vscode-button *ngIf="componentState[todo.id]?.isEditable" (click)="cancelEdit(todo.id)"
									>Cancel</vscode-button
								>
								<vscode-button *ngIf="!componentState[todo.id]?.isEditable" (click)="delete(todo.id)"
									>Delete</vscode-button
								>
							</div>
							<div class="labels">
								<todo-label [todo]="todo"></todo-label>
							</div>
						</div>
					</div>
				</div>
			</li>
		</ng-container>
	</ul>
</section>
